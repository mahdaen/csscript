!function($){"use strict";$.ready(function(){setTimeout(initParser,0)});var initParser=function(){$('<style type="text/css" id="csscript-holder">').appendTo("head"),$('link[rel="stylesheet"]').each(function(){var a=$(this).attr("href");if(isString(a))$.get(a).success(function(b){b.search(/\%\(/)<0&&!CSScriptExtractAll||(ColectedCSS.push({css:b,url:a}),$.renderCSScript())});else{var b=$(this).html();if(b.search(/\%\(/)<0)return;b.length>10&&(ColectedCSS.push({css:b,url:"local"}),$.renderCSScript())}})},ColectedCSS=[];$.renderCSScript=function(){foreach(ColectedCSS,function(a){new CSSStyleSheet(a.url,a.css);extractBlocks(a.css,a.url)})};var extractBlocks=function(a,b){if(isString(a)){a=a.replace(/\(\s?\{/g,"(!$").replace(/\}\s?\)/g,"$!)");var c=a.match(RgxBlock);if(c){var d=new CSSStylesheet(b);foreach(c,function(a){if(!(a.search(/\%\(/)<0)||CSScriptExtractAll){a=a.replace(/\n+/,"");var b=a.slice(0,1);if("@"===b){if(a.search(/^\@/)>-1&&(a+="}"),a.search("@media")>-1)return;if(a.search("@keyframes")>-1||a.search("@-webkit-keyframes")>-1)return;if(a.search("@font-face")>-1)return}else{var c=new CSSStyleRule(a);c.parent=d.rules,c.extract(),parseRule(c,a,!0),d.rules.push(c)}}})}}},parseRule=function(a,b,c){var d,e=a;if(d=b.match(/[a-zA-Z\d\.\s+\,\-\:\(\)\#\*\[\]\=\"\']+\{/),e.type="CSSStyleRule",d){var f=b.replace(d[0],"").replace("}","").replace(/\n+/g,"");if(d=d[0].replace(/\s?\{/,"").replace(/\n/g," "),e.selector=d,f=f.replace(/\;\s+/,";").split(";")){var g={proceed:!1,styles:[]};if(foreach(f,function(a){if(""!==a){var a=a.replace(/\s+/g," ").replace(/\s+/,""),b=a.match(/[\*a-zA-Z\-]+\:/);if(b&&b.length>0){var c=a.replace(b[0],"").replace(/\s+/,"");b=b[0].replace(/\s+/g,"").replace(":",""),c.search(/\%\(/)>-1&&c.search(/\)\%/)&&(g.styles.push({key:b,value:c}),g.proceed=!0),e.styles.push(b,c)}}}),c&&g.proceed){a.declaredCSScript=g,ColectedCSScript.push(a),e.render();var h=["hover","focus","blur","click","mouseenter","mouseleave","change"],i=!1;foreach(h,function(a){d.search(":"+a)>-1&&(i=!0)}),i?foreach(h,function(a){if(!(d.search(a)<0)&&(d=d.replace(new RegExp("\\:"+a,"g"),""),a in SpecialPseudos)){var b=SpecialPseudos[a].a,c=SpecialPseudos[a].b;$(d).each(function(a){var d=this;d._orgcss={},foreach(g.styles,function(a){var b=a.key;if("script"!==b&&"scripts"!==b){var c=$(this).css(b);d._orgcss[b]=c?c:null}}),this._evcol&&$(this).unlisten("css"+b).unlisten("css"+c),$(this).listen("css"+b,b,function(){applyDeclaration.call(this,a,g)}).listen("css"+c,c,function(){this._orgcss&&foreach(this._orgcss,function(a,b){})})})}}):$(d).each(function(a){this.csselector=d,applyDeclaration.call(this,a,g)})}}}return e},ColectedCSScript=[],SpecialPseudos={hover:{a:"mouseenter",b:"mouseleave"}},applyDeclaration=function(i,cssDecl,selector){var $this=this,$props={},hasprop;if(foreach(cssDecl.styles,function(style){var key=style.key,value=style.value,inlineScript="script"===key||"scripts"===key?!0:!1;value=value.replace(/\$i/g,i).replace(/this/g,"$this").replace(/\@/g,"CSScriptVariables."),value=value.replace(/\"\%\(/,"%(").replace(/\)\%\"/,")%").replace(/\'\%\(/,"%(").replace(/\)\%\'/,")%"),value=value.replace(/\(\!\$/g,"({").replace(/\$\!\)/g,"})");var csscValues=value.match(/\%\([a-zA-Z\.\,\!\@\%\(\)\'\"\:\?\d\<\>\*\/\=\$\#\s\+\-\_\[\]\{\}\|\&\\]+\)\%/g);if(csscValues&&foreach(csscValues,function(csscValue){var newValue,script=csscValue.replace(/\%\(/,"").replace(/\)\%/,"");if(inlineScript){try{eval(script)}catch(err){}delete $props[key]}else{try{eval("newValue = "+script)}catch(err){}value=void 0!==newValue?value.replace(csscValue,newValue):value.replace(csscValue,null)}}),!inlineScript){hasprop=!0;try{eval("value = "+value)}catch(err){}$props[key]=void 0!==value?value:null}}),this.defcssc||(this.defcssc=$props),hasprop){var cssString=createCSS(this.csselector+":nth-child("+i+")",$props);this._oldcss&&CSScriptCSS.search(this._oldcss)>-1?CSScriptCSS=CSScriptCSS.replace(this._oldcss,cssString):CSScriptCSS+=createCSS(this.csselector+":nth-child("+(i+1)+")",$props),$("#csscript-holder").html(CSScriptCSS),this._oldcss=cssString}return $props},createCSS=function(a,b){if(isString(a)&&isObject(b)){var c="\n"+a+" { \n";foreach(b,function(a,b){c+="	"+a+": "+b+";"}),c+="\n}"}return c},CSScriptLists=function(){return this.length=0,this};CSScriptLists.prototype={push:function(a){return this[this.length]=a,this.length=this.length+1,this}},window.CSScriptLists=new CSScriptLists;var CSSStylesheet=function(a,b){return this.href=a,this.cssText=b,this.rules=new CSSRuleList,window.CSScriptLists.push(this),this};CSSStyleSheet.prototype={extract:function(){}};var CSSRuleList=function(){return this.length=0,this};CSSRuleList.prototype={push:function(a){return this[this.length]=a,this.length=this.length+1,this},indexOf:function(a){var b;return foreach(this,function(c){c.selector===a&&(b=c)}),b}};var CSSStyleRule=function(a,b){return this.cssText=a,this.selector=b,this.styles=new CSSStyleList,this};CSSStyleRule.prototype={render:function(){console.log(this)},extract:function(){}};var CSSStyleList=function(){return this};CSSStyleList.prototype={push:function(a,b){return this[a]=b,this}};var CSSMediaRule=function(a,b){return this.cssText=a,this.queries=b,this.rules=new CSSRuleList,this},CSSKeyframeRule=function(a,b){return this.cssText=a,this.selector=b,this.styles=new CSSStyleList,this},CSSFontRule=function(a,b){return this.cssText=a,this.selector=b,this.styles=new CSSStyleList,this};window.CSScriptVariables={};var CSScriptCSS="";window.CSScriptExtractAll=!1;var RgxBlock=/[a-zA-Z\d\@\%\#\*\[\]\=\"\'\d\s+\.\,\:\-\_\(\)]+\{\s+[a-zA-Z\!\/\d\:\s?;\-\%\#\'\"\.\,\(\)\*\+\{\<\>\=\@\?\$\_\[\]\|\&\\]+\}/g,windowresize=setTimeout(function(){},200);window.addEventListener("resize",function(){clearTimeout(windowresize),windowresize=setTimeout(function(){foreach(ColectedCSScript,function(a){$(a.selector).each(function(b){applyDeclaration.call(this,b,a.declaredCSScript)})})},200)})}(DOMList);
//# sourceMappingURL=csscript.domlist.min.map